(function () {/*
 David Rekow 2014
*/
function e(a,b,c){var d;this._prop={};this._cb={};b&&(c=c||"",Object.defineProperty(this,"_root",{value:b}),Object.defineProperty(this,"_path",{value:c}));for(d in a)a.hasOwnProperty(d)&&"function"!==typeof a[d]&&this.bind(d,a[d])}
e.prototype={get:function(a){return h(this,a)},set:function(a,b){if("object"===typeof a&&"undefined"===typeof b)for(a in b=a,b)b.hasOwnProperty(a)&&h(this,a,b[a]);else h(this,a,b)},replace:function(a){var b,c;if("object"!==typeof a)throw new TypeError("Fragment.replace() expects an object as the only parameter.");for(b in this._prop)this._prop.hasOwnProperty(b)&&void 0===a[b]&&(this[b]=null);for(b in a)a.hasOwnProperty(b)&&(c=this.get(b),c instanceof e&&c.replace(a[b]||{}),this.set(b,a[b]))},watch:function(a,
b){if(this._root)return this._root.watch(this._path+"."+a,b);this._cb[a]||(this._cb[a]=[]);this._cb[a].push(b)},unwatch:function(a,b){var c;if(this._root)return this._root.unwatch(this._path+"."+a,b);this._cb[a]&&(b?(c=this._cb[a].indexOf(b),-1<c&&this._cb[a].splice(c,1)):this._cb[a]=[])},toJSON:function(){return this._prop},constructor:e,bind:function(a,b){Object.defineProperty(this,a,{enumerable:!0,get:function(){return this._prop[a]},set:function(b){null===b&&(this.remove(a),b=void 0);if(!("object"!==
typeof b||Array.isArray(b)||b instanceof e))return h(this,a,b);this._prop[a]=b;l(this,a,b,this)}});this.set(a,b)},remove:function(a){var b;if(this._root)return this._root.remove(this._path+"."+a);for(b in this._cb)this._cb.hasOwnProperty(b)&&0===b.indexOf(a)&&b!==a&&this.get(b)&&l(this,b,null,this)}};function l(a,b,c,d){if(a._root)return l(a._root,a._path+"."+b,c,d);(a=a._cb[b])&&a.forEach(function(a){a.call(d,c)})}
function h(a,b,c){b=b.split(".");var d=b.pop(),f=a._path||"",m=a._root||a,g,k;for(k=0;k<b.length;k++){g=b[k];f+=f?"."+g:b;if(!a[g]){if(void 0===c||null===c)return null;a.hasOwnProperty(g)?a[g]=new e(null,m,f):a.bind(g,new e(null,m,f))}a=a[g]}f+=f?"."+d:d;if(void 0===c)return a[d];a.hasOwnProperty(d)||a.bind(d);if("object"===typeof c){if(a[d]instanceof e)return a[d].set(c);c instanceof e||c instanceof Array||(c=new e(c,m,f))}a[d]=c}
function n(a,b){return a instanceof e?b?(a._root=b,a):a:new e(a,b)}"undefined"!==typeof window&&window.self===window&&(window.panoptic=n);"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=n);"function"===typeof define&&define("panoptic",n);}).call(this);
