(function () {/*
 David Rekow 2014
*/
function e(a,b,c){var d;b&&(Object.defineProperty(this,"_root",{value:b}),Object.defineProperty(this,"_path",{value:c}));this._prop={};this._cb={};for(d in a)a.hasOwnProperty(d)&&"function"!==typeof a[d]&&this.bind(d,a[d])}
e.prototype={get:function(a){return k(this,a)},set:function(a,b){k(this,a,b)},watch:function(a,b){if(this._root)return this._root.watch(this._path+"."+a,b);this._cb[a]||(this._cb[a]=[]);this._cb[a].push(b)},unwatch:function(a,b){var c;if(this._root)return this._root.unwatch(this._path+"."+a,b);this._cb[a]&&(b?(c=this._cb[a].indexOf(b),-1<c&&this._cb[a].splice(c,1)):this._cb[a]=[])},toJSON:function(){return this._prop},constructor:e,bind:function(a,b){Object.defineProperty(this,a,{enumerable:!0,get:function(){return this._prop[a]},
set:function(b){this._prop[a]=b;l(this,a,b,this)}});this.set(a,b)}};function l(a,b,c,d){if(a._root)return l(a._root,a._path+"."+b,c,d);(a=a._cb[b])&&a.forEach(function(a){a.call(d,c)})}
function k(a,b,c){b=b.split(".");var d=b.pop(),f=a._path||"",m=a._root||a,g,h;for(h=0;h<b.length;h++){g=b[h];f+="."+g;if(!a.hasOwnProperty(g)){if(void 0===c||null===c)return null;a.bind(g,new e(null,m,f))}a=a[g]}if(void 0===c)return a[d];"object"!==typeof c||c instanceof e||c instanceof Array||(c=new e(c,m,f+(f?"."+d:d)));a.hasOwnProperty(d)||a.bind(d);a[d]=c}this.panoptic=function(a){return new e(a)};"undefined"!==typeof module&&"object"===typeof module.exports&&(module.exports=this.panoptic);
"function"===typeof define&&define("panoptic",this.panoptic);}).call(this);
